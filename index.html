<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrainQuest | Premium Quiz Experience</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth_styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed', err));
            });
        }
    </script>
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="logo">BrainQuest</div>
            <div class="header-controls">
                <button id="badges-btn" class="icon-btn" title="View Badges">üèÖ</button>
                <button id="dark-mode-toggle" class="icon-btn" title="Toggle Dark Mode">üåô</button>
            </div>
            <div class="score-display" id="score-display" style="display: none;">Score: <span
                    id="current-score">0</span>
            </div>
        </header>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="spinner"></div>
            <p>Loading Quiz...</p>
        </div>

        <!-- Main Content Area -->
        <div id="auth-container" class="auth-container">
            <div class="auth-box" id="login-box">
                <h2>Welcome Back</h2>
                <p class="auth-subtitle">Login to continue your journey</p>
                <form id="login-form">
                    <div class="input-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" placeholder="Enter your email" required>
                    </div>
                    <div class="input-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="btn-primary full-width">Log In</button>
                </form>
                <p class="auth-switch">Don't have an account? <a href="#" id="show-signup">Sign Up</a></p>
            </div>

            <div class="auth-box hidden" id="signup-box">
                <h2>Create Account</h2>
                <p class="auth-subtitle">Join BrainQuest today</p>
                <form id="signup-form">
                    <div class="input-group">
                        <label for="signup-name">Full Name</label>
                        <input type="text" id="signup-name" placeholder="Enter your name" required>
                    </div>
                    <div class="input-group">
                        <label for="signup-email">Email</label>
                        <input type="email" id="signup-email" placeholder="Enter your email" required>
                    </div>
                    <div class="input-group">
                        <label for="signup-password">Password</label>
                        <input type="password" id="signup-password" placeholder="Create a password" required>
                    </div>
                    <button type="submit" class="btn-primary full-width">Sign Up</button>
                </form>
                <p class="auth-switch">Already have an account? <a href="#" id="show-login">Log In</a></p>
            </div>
        </div>

        <main id="main-content" style="display: none;">
            <!-- Menu View -->
            <section id="menu-view" class="view active">
                <div class="hero-text">
                    <h1>Challenge Your Intellect</h1>
                    <p>Select a category to begin your journey.</p>
                </div>
                <div class="category-grid">
                    <button class="category-card" data-category="gk">
                        <div class="icon">üåç</div>
                        <h3>General Knowledge</h3>
                    </button>
                    <button class="category-card" data-category="math">
                        <div class="icon">üìê</div>
                        <h3>Mathematics</h3>
                    </button>
                    <button class="category-card" data-category="science">
                        <div class="icon">üß¨</div>
                        <h3>Science</h3>
                    </button>
                    <button class="category-card" data-category="cs">
                        <div class="icon">üíª</div>
                        <h3>Computer Science</h3>
                    </button>
                    <button class="category-card" data-category="english">
                        <div class="icon">üìö</div>
                        <h3>English</h3>
                    </button>
                    <button class="category-card" data-category="geography">
                        <div class="icon">üåè</div>
                        <h3>Geography</h3>
                    </button>
                    <button class="category-card" data-category="biology">
                        <div class="icon">ü¶†</div>
                        <h3>Biology</h3>
                    </button>
                    <button class="category-card" data-category="physics">
                        <div class="icon">‚öõÔ∏è</div>
                        <h3>Physics</h3>
                    </button>
                </div>

                <!-- Settings Section -->
                <div class="settings-section">
                    <h2>Quiz Settings</h2>
                    <div class="settings-grid">
                        <div class="setting-card">
                            <div class="setting-icon">‚è±Ô∏è</div>
                            <div class="setting-info">
                                <h3>Timer</h3>
                                <p>Enable countdown timer</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="timer-toggle" checked>
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="setting-card" style="display: none;">
                            <div class="setting-icon">üîä</div>
                            <div class="setting-info">
                                <h3>Sound Effects</h3>
                                <p>Enable audio feedback</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="sound-toggle" checked>
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="setting-card">
                            <div class="setting-icon">üî¢</div>
                            <div class="setting-info">
                                <h3>Questions</h3>
                                <p>Number of questions</p>
                            </div>
                            <select id="question-count-select" class="setting-select">
                                <option value="5">5 Questions</option>
                                <option value="10" selected>10 Questions</option>
                                <option value="15">15 Questions</option>
                                <option value="20">20 Questions</option>
                            </select>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Level Selection View -->
            <section id="level-view" class="view">
                <div class="hero-text">
                    <h1>Select Difficulty</h1>
                    <p>Choose your challenge level.</p>
                </div>
                <div class="level-grid">
                    <button class="level-card" data-level="easy">
                        <div class="icon">üü¢</div>
                        <h3>Easy</h3>
                    </button>
                    <button class="level-card" data-level="medium">
                        <div class="icon">üü°</div>
                        <h3>Medium</h3>
                    </button>
                    <button class="level-card" data-level="hard">
                        <div class="icon">üî¥</div>
                        <h3>Hard</h3>
                    </button>
                </div>
                <button id="back-to-categories-btn" class="btn-secondary" style="margin-top: 2rem;">Back to
                    Categories</button>
            </section>

            <!-- Quiz View -->
            <section id="quiz-view" class="view">
                <div class="quiz-header">
                    <button id="back-to-menu-btn" class="icon-btn" title="Back to Menu">‚Üê Back</button>
                    <div class="quiz-stats">
                        <div id="question-tracker" class="question-tracker">1 / 10</div>
                        <div id="streak-counter" class="streak-counter" style="display: none;">
                            üî• <span id="streak-value">0</span>
                        </div>
                        <div id="live-score" class="live-score">
                            Score: <span id="live-score-value">0</span>
                        </div>
                    </div>
                    <div class="timer-display" id="timer-display">00:00</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
                <div class="question-container">
                    <h2 id="question-text">Question goes here?</h2>
                    <div class="options-grid" id="options-container">
                        <!-- Options will be injected here -->
                    </div>
                </div>

                <!-- Error Container -->
                <div id="error-container" class="error-container hidden">
                    <div class="error-icon">‚ö†Ô∏è</div>
                    <h3 id="error-title">Oops! Something went wrong</h3>
                    <p id="error-message">We couldn't load the questions.</p>
                    <button id="retry-btn" class="btn-primary">üîÑ Try Again</button>
                </div>

                <div class="feedback-message" id="feedback-message"></div>
            </section>

            <!-- Results View -->
            <section id="results-view" class="view">
                <div class="results-content">
                    <h2>Quiz Completed!</h2>

                    <!-- High Score Badge -->
                    <div id="high-score-badge" class="high-score-badge hidden">
                        üèÜ New High Score!
                    </div>

                    <div class="final-score">
                        <span id="final-score-value">0</span> / <span id="total-questions">10</span>
                    </div>
                    <p id="result-message">Great job!</p>
                    <div class="percentage" id="percentage-display">0%</div>

                    <!-- Detailed Breakdown -->
                    <div class="score-breakdown">
                        <div class="breakdown-item">
                            <span class="breakdown-icon">‚úÖ</span>
                            <span class="breakdown-label">Correct</span>
                            <span class="breakdown-value" id="correct-count">0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">‚ùå</span>
                            <span class="breakdown-label">Wrong</span>
                            <span class="breakdown-value" id="wrong-count">0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">üìä</span>
                            <span class="breakdown-label">Accuracy</span>
                            <span class="breakdown-value" id="accuracy-display">0%</span>
                        </div>
                    </div>

                    <div class="time-taken" id="time-taken-display"
                        style="margin-bottom: 1rem; font-size: 1.2rem; color: var(--text-secondary);">
                        Time Taken: 00:00</div>
                    <div class="result-buttons">
                        <button id="share-btn" class="btn-secondary">üì§ Share Results</button>
                        <button id="review-btn" class="btn-secondary">Review Answers</button>
                        <button id="restart-btn" class="btn-primary">Back to Menu</button>
                    </div>
                </div>
            </section>

            <!-- Review View -->
            <section id="review-view" class="view">
                <div class="review-header">
                    <h2>Review Answers</h2>
                    <button id="close-review-btn" class="icon-btn">‚úï Close</button>
                </div>
                <div id="review-list" class="review-list">
                    <!-- Review items injected here -->
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 BrainQuest. Designed for Excellence.</p>
        </footer>

        <!-- Badges Modal -->
        <div id="badges-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üèÖ Your Achievements</h2>
                    <button class="close-btn" id="close-badges-modal">√ó</button>
                </div>
                <div class="badges-grid" id="badges-grid">
                    <!-- Badges will be injected here -->
                </div>
            </div>
        </div>

        <!-- Leaderboard Modal -->
        <div id="leaderboard-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üèÜ Leaderboard</h2>
                    <button class="close-btn" id="close-leaderboard-modal">√ó</button>
                </div>
                <div class="leaderboard-list" id="leaderboard-list">
                    <p style="text-align: center; color: var(--text-muted);">Coming soon!</p>
                </div>
            </div>
        </div>
    </div>
    <script src="auth_logic.js"></script>
    <script src="quiz_data.js"></script>
    <script src="script.js"></script>
</body>

</html>